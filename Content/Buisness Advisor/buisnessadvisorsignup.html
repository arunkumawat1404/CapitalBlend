<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">

  <title>CapitalBlend | Login</title>
  <meta content="" name="description">
  <meta content="" name="keywords">

  <!-- Favicons -->
  <link href="/assets/img/favicon.png" rel="icon">
  <link href="/assets/img/apple-touch-icon.png" rel="apple-touch-icon">

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Nunito:300,300i,400,400i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i" rel="stylesheet">
  <link src="http://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">
  <!-- Vendor CSS Files -->
  <link href="/assets/vendor/aos/aos.css" rel="stylesheet">
  <link href="/assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="/assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="/assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
  <link href="/assets/vendor/remixicon/remixicon.css" rel="stylesheet">
  <link href="/assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">

  <!-- Template Main CSS File -->
  <link href="/assets/css/style.css" rel="stylesheet">
  <link href="/assets/css/signupstyle.css" rel="stylesheet">

</head>

<body>

  <!-- ======= Header ======= -->
  <header id="header" class="header fixed-top">
    <div class="container-fluid container-xl d-flex align-items-center justify-content-between">

      <a href="/index.html" class="logo d-flex align-items-center">
        <img src="/assets/img/logo.png" alt="">
        <span>CapitalBlend</span>
      </a>
      <nav id="navbar" class="navbar">
        <ul>
          <li><a class="nav-link scrollto active" href="/index.html">Home</a></li>
       
          <li class="dropdown"><a href="#"><span>Login</span> <i class="bi bi-chevron-down"></i></a>
            <ul>
              <li><a href="/Content/Buisness People/buisnesslogin.html">Buisness People</a></li>
              <li><a href="/Content/Investor/investorlogin.html">Investor</a></li>
              <li><a href="/Content/Buisness Advisor/buisnessadvisorlogin.html">Buisness Advisor</a></li>
              <li><a href="/Content/Admin/adminlogin.html">Admin</a></li>
            </ul>
          </li>
          <li class="dropdown"><a href="#"><span>Sign Up</span> <i class="bi bi-chevron-down"></i></a>
            <ul>
              <li><a href="/Content/Buisness People/buisnesssignup.html">Buisness</a></li>
              <li><a href="/Content/Investor/investorsignup.html">Investor</a></li>
              <li><a href="/Content/Buisness Advisor/buisnessadvisorsignup.html">Buisness Advisor</a></li>
     
            </ul>
          </li>
        </ul>
        <i class="bi bi-list mobile-nav-toggle"></i>
      </nav><!-- .navbar -->
      

    </div>
  </header><!-- End Header -->
  <main>
    <div class="wrapper">
        <div class="logo1">
            <img src="\assets\img\apple-touch-icon.png" alt="">
        </div>
        <div class="text-center mt-4 name">
            <h1>Sign Up</h1>
            <h2>Buisness Advisor</h2>
        </div>
        <div class="error"></div>
        <form class="p-3 mt-3" method="post" id="advisorsignup">
          <div class="row">
            
            <div class="form-field d-flex align-items-center">
              <span class="fa fa-user"></span>
              <input type="text" name="fname" id="fname" placeholder="First Name" required>
          
          </div>
         
            <div class="form-field d-flex align-items-center">
              <span class="fa fa-user"></span>
              <input type="text" name="lname" id="lname" placeholder="Last Name" required>
          </div>
          </div>
          <div class="row">
            <div class="form-field d-flex align-items-center">
              <span class="fa fa-envelope"></span>
              <input type="email" name="email" id="email" placeholder="Email" required>
          </div>
          <div class="form-field d-flex align-items-center">
            <span class="fa fa-envelope"></span>
            <input type="tel" name="phone" id="phone" placeholder="Phone Number" required>
        </div>
          </div>
          <div class="row">
            <div class="form-field d-flex" >
              
              <textarea style=" font-size:1.2rem ; padding: 10px; border-radius: 20px;   background-color: #ecf0f3;box-shadow: inset 8px 8px 8px #cbced1, inset -8px -8px 8px #fff;" name="address" id="address" cols="37" rows="4" placeholder="Address" required></textarea>
             
          </div>
          <div class="form-field d-flex" >
              
            <textarea style=" font-size:1.2rem ; padding: 10px; border-radius: 20px;   background-color: #ecf0f3;box-shadow: inset 8px 8px 8px #cbced1, inset -8px -8px 8px #fff;" name="bio" id="bio" cols="37" rows="4" placeholder="Describe About you" required></textarea>
           
        </div>
        </div>
          
          <div class="row">
            <div  style="margin-left: 50%;margin-left: 10%;font-size: 1.2rem;" class="form-field ">
             <h3>Gender</h3> 
              <input  style="height: 20px; width: 20px;" type="radio" name="gender" id="male" value="Male" required>
              <label for="male">Male</label>
              <input style="height: 20px; width: 20px;" type="radio" name="gender" id="female"  value="Female">
            <label for="male">Female</label>
          <input style="height: 20px; width: 20px;" type="radio" name="gender" id="other" value="Other" >
          <label for="male">Other</label>
          </div>
          <div class="form-field d-flex align-items-center">
            <input type="text" name="experience" id="experience" placeholder="Experience in the field" required>

          </div>
          </div>
            <div class="row">
              <div class="form-field d-flex align-items-center">
                <span class="fa fa-key"></span>
                <input type="password" name="password" id="password" placeholder="Password" required>
            </div>
            <div class="form-field d-flex align-items-center">
              <span class="fa fa-key"></span>
              <input type="password" name="cpassword" id="confirmpassword" placeholder=" Confirm Password" required>
          </div>
            </div>
            <button class="btn mt-3" type="submit" sendMessage()>Sign Up</button>
        </form>
        
       <br>
        <h2 style="text-align: center;font-weight: bold;">Join to resolve Buisness Problems</h2>
    </div>
  </main>


  

  <!-- Template Main JS File -->
  <script src="/assets/js/main.js"></script>
  <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
  <script type="module">
    // Import the functions you need from the SDKs you need

import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-app.js";
import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-analytics.js";
// TODO: Add SDKs for Firebase products that you want to use
// https://firebase.google.com/docs/web/setup#available-libraries

// Your web app's Firebase configuration
// For Firebase JS SDK v7.20.0 and later, measurementId is optional
const firebaseConfig = {
  apiKey: "AIzaSyA1d_5_pS8yG4oRXZMU-NlIZ8_MGUX3eJ8",
  authDomain: "capitalblend-e124d.firebaseapp.com",
  databaseURL: "https://capitalblend-e124d-default-rtdb.firebaseio.com",
  projectId: "capitalblend-e124d",
  storageBucket: "capitalblend-e124d.appspot.com",
  messagingSenderId: "765006869658",
  appId: "1:765006869658:web:2773ddeb2847c8be8a1b23",
  measurementId: "G-0389KXQWN9"
};

// Initialize Firebase
const app = initializeApp(firebaseConfig);
const analytics = getAnalytics(app);
console.log(app);

import { getDatabase, ref, set } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-database.js";
import {  get, child } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-database.js";


//listen for submit event//(1)
document
.getElementById('advisorsignup')
.addEventListener('submit', formSubmit);

//Submit form(2)
function formSubmit(e) {
e.preventDefault();
// Get Values from the DOM
let fname = document.querySelector('#fname').value;
let lname = document.querySelector('#lname').value;
let email = document.querySelector('#email').value;
let phone = document.querySelector('#phone').value;
let address = document.querySelector('#address').value;
let bio = document.querySelector('#bio').value;
let gender=document.querySelector('input[name="gender"]:checked').value;


let experience = document.querySelector('#experience').value;
let password = document.querySelector('#password').value;
let confirmpassword = document.querySelector('#confirmpassword').value;
/*function checkUserRegistration(email) {
  const database = getDatabase();
  const usersRef = ref(database, 'advisorusers');

  // Perform a query to find a user with the given email
  return get(child(usersRef, emailToKey(email)))
    .then((snapshot) => {
      if (snapshot.exists()) {
        // User already registered
        return true;
      } else {
        // User not registered
        return false;
      }
    })
    .catch((error) => {
      console.log('Error checking user registration:', error);
      return false;
    });
}

// Convert email to a valid Firebase Realtime Database key
function emailToKey(email) {
  return email.replace('.', ',');
}*/
if (password !== confirmpassword) {
    // Passwords do not match, display error message
    document.querySelector('.error').textContent = "Passwords do not match";
    setTimeout(function() {
      document.querySelector('.error').style.display='none' ;// Hide the error message
    }, 5000);
  
   /*else {
     checkUserRegistration(email)
    .then((isRegistered) => {
      if (isRegistered) {
        // User is already registered
        document.querySelector('.error').textContent = "usedr is already registered";
       setTimeout(function() {
      document.querySelector('.error').style.display='none' ;// Hide the error message
    }, 5000);*/
        // Display appropriate message to the user
      } else {
        // User is not registered, proceed with registration
        document.querySelector('.error').textContent = "Registered Successfully Proceed with Login";
         sendMessage(fname,lname, email,phone,address,bio,gender,experience, password, confirmpassword);
        // Register the user in Firebase
      }
    
  
    

    // Passwords match, proceed with form submission
  }   


//Send Message to Firebase(4)
function sendMessage(fname,lname, email,phone,address,bio,gender,experience, password, confirmpassword) {
const database = getDatabase();

set(ref(database, 'advisorusers/' + Math.floor(Math.random() * 10000000)), {
fname: fname,
lname: lname,
email: email,
phone: phone,
address: address,
bio: bio,
gender: gender,

experience: experience,
password: password, 
confirmpassword:confirmpassword
}).then(() => {
  //Show Alert Message(5)

document.getElementById('advisorsignup').reset();

}).catch((error) => {
alert(error)
})
}
 </script>
</body>

</html>