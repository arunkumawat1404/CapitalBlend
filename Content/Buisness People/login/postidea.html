<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">

  <title>CapitalBlend | Buisness People</title>
  <meta content="" name="description">
  <meta content="" name="keywords">

  <!-- Favicons -->
  <link href="/assets2/img/favicon.png" rel="icon">
  <link href="/assets2/img/apple-touch-icon.png" rel="apple-touch-icon">

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Raleway:300,300i,400,400i,500,500i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i" rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="/assets2/vendor/aos/aos.css" rel="stylesheet">
  <link href="/assets2/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="/assets2/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="/assets2/vendor/boxicons/css/boxicons.min.css" rel="stylesheet">
  <link href="/assets2/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
  <link href="/assets2/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">

  <!-- Template Main CSS File -->
  <link href="/assets2/css/style.css" rel="stylesheet">
  <!--Form css-->
  <!-- Favicons -->
  <link href="/assets/img/favicon.png" rel="icon">
  <link href="/assets/img/apple-touch-icon.png" rel="apple-touch-icon">
  <link href="https://cdn.mobiscroll.com/3.2.6/css/mobiscroll.custom-3.2.6.min.css" rel="stylesheet" />
  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Nunito:300,300i,400,400i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i" rel="stylesheet">
  <link src="http://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <link href="http://maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">
  <!-- Vendor CSS Files -->
  <link href="/assets/vendor/aos/aos.css" rel="stylesheet">
  <link href="/assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="/assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="/assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
  <link href="/assets/vendor/remixicon/remixicon.css" rel="stylesheet">
  <link href="/assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">

  <!-- Template Main CSS File -->
  
 <link href="/assets/css/signupstyle2.css" rel="stylesheet">

</head>

<body>

  <!-- ======= Mobile nav toggle button ======= -->
  <i class="bi bi-list mobile-nav-toggle d-xl-none"></i>

  <!-- ======= Header ======= -->
  <header id="header">
    <div class="d-flex flex-column">

      <div class="profile">
        <img src="/assets2/img/profile-img.jpg" alt="" class="img-fluid rounded-circle">
        <h1 class="text-light"><a href="" id="fname"></a></h1>
        <div class="social-links mt-3 text-center">
          <a href="#" class="twitter"><i class="bx bxl-twitter"></i></a>
          <a href="#" class="facebook"><i class="bx bxl-facebook"></i></a>
          <a href="#" class="instagram"><i class="bx bxl-instagram"></i></a>
          <a href="#" class="google-plus"><i class="bx bxl-skype"></i></a>
          <a href="#" class="linkedin"><i class="bx bxl-linkedin"></i></a>
        </div>
      </div>

      <nav id="navbar" class="nav-menu navbar">
        <ul>
            <li><a href="/Content/Buisness People/login/home.html" class="nav-link scrollto "><i class="bx bx-home"></i> <span>Home</span></a></li>
            <li><a href="/Content/Buisness People/login/profile.html" class="nav-link scrollto"><i class="bx bx-user"></i> <span>Profile</span></a></li>
            <li><a href="/Content/Buisness People/login/postidea.html" class="nav-link scrollto active"><i class="bx bx-file-blank"></i> <span>Post Idea</span></a></li>
            <li><a href="/Content/Buisness People/login/portfolio.html" class="nav-link scrollto "><i class="bx bx-book-content"></i> <span> Manage Portfolio</span></a></li>
            <li><a href="/Content/Buisness People/login/billing.html" class="nav-link scrollto"><i class="bx bx-server"></i> <span>Billing</span></a></li>
            <li><a href="/Content/Buisness People/login/contact.html" class="nav-link scrollto"><i class="bx bx-envelope"></i> <span>Contact</span></a></li>
            <li><a href="#" id="logout" class="nav-link scrollto"><i class="bx bx-log-out"></i> <span>Log Out</span></a></li>
          </ul>
      </nav><!-- .nav-menu -->
    </div>
  </header><!-- End Header -->

  <!-- ======= Hero Section ======= -->
  
  </section><!-- End Hero -->
  <!--idea Section-->
  <main>
    <div class="wrapper">
        <div class="logo1">
            <img src="\assets\img\apple-touch-icon.png" alt="">
        </div>
        <div class="text-center mt-4 name">
            <h1>Post Idea</h1>
            <h2>Raise Fund</h2>
        </div>
        <div class="error"></div>
        <form class="p-3 mt-3" method="post" id="postidea">
          
          <div class="row">
            <div class="form-field d-flex align-items-center">
              <span class="fa fa-envelope"></span>
              <input type="email" name="email" id="email" placeholder="Email" required>
          </div>
          <div class="form-field d-flex align-items-center">
            <span class="fa fa-envelope"></span>
            <input type="tel" name="phone" id="phone" placeholder="Phone Number" required>
        </div>
          </div>
          
          <div class="row">

            <div  style="margin-left: 50%;margin-left: 10%;font-size: 1.2rem;" class=" form-field ">
             <h3>Are you a single founder ?</h3> 
              <input  style="height: 20px; width: 20px;" type="radio" name="foundersingle" id="yes" value="Yes" required>
              <label for="foundersingle">Yes</label>
              <input style="height: 20px; width: 20px;" type="radio" name="foundersingle" id="no" value="No" >
            <label for="foundersingle">No</label>
          
          </div>
          <br>
            <div class="form-field  ">
                <label for="role"><h3>What define You best</h3></label>
                <select name="role" id="role" required>
                  <option value="Buisness Owner">Buisness Owner</option>
                  <option value="Corporate Organistaion">Corporate Organistaion</option>
                  <option value="Student">Student</option>
                  <option value="StartUp Founder">StartUp Founder</option>
                   <option value="Works For an Organisation">Works For an Organisation</option>
                  <option value="Other">Other</option>
                </select>
              </div>
       
          </div>
          <div class="row">
            <div class="form-field  ">
              <label for="stage"><h3>Stage Of Start Up</h3></label>
              <select name="stage" id="stage" required>
                <option value="Idea Stage">Idea Stage</option>
                <option value="Proof of concept">Proof of concept</option>
                <option value="Beta Launched">Beta Launched</option>
                <option value="Early Traction">Early Traction</option>
                 <option value="Steady Revenues">Steady Revenues</option>
               
              </select>
            </div>
            <div class="form-field ">
              <label  for="buisness" ><h3>Buisness sector your idea belongs</h3>
              
              </label>
              <select name="buisness" id="buisnesssector" required >
                <option value="Agriculture">Agriculture</option>
                <option value="E-Commerce">E-Commerce</option>
                <option value="Education and E-learning">Education and E-learning</option>
                <option value="Financial Services">Financial Services</option>
                <option value="Health and Wellness">Health and Wellness</option>
                <option value="Food and Beverages">Food and Beverages</option>
                <option value="Media and Entertainment">Media and Entertainment</option>
                <option value="Manufacturing and Industrial">Manufacturing and Industrial</option>
                <option value="Real Estate">Real Estate</option>
                <option value="Travel and Tourism">Travel and Tourism</option>
                <option value="Technology and Software">Technology and Software</option>
              </select>
            </div>
          </div>
          <div class="row">
            <div class="form-field d-flex ">
              <input type="text" name="organisation" id="norganisation"  placeholder="Organistion Name You belong if any">

            </div>
            <div class="form-field d-flex ">
              <label for="startup"><h3></h3></label>
              <input type="text" name="startup"  id="nstartup" placeholder="Name of  startup" required>
            </div>
          </div>
            <div class="row">
              <div class="form-field ">
                <span class="fa fa-file"></span>
                <label for="date"><h3> Pitch Deck</h3></label>
                <input type="file" name="file" id="file" placeholder="Pitch Deck" required>
            </div>
            <div class="form-field d-flex align-items-center">
              <span class="fa fa-link"></span>
              <input type="url" name="url" id="url" placeholder="Website Url" >
          </div>
            </div>
            <div class="row">
                <div class="form-field d-flex" >
                  
                  <textarea style=" font-size:1.2rem ; padding: 10px; border-radius: 20px;   background-color: #ecf0f3;" name="idea" id="idea" cols="37" rows="4" placeholder=" Brief Your idea" required ></textarea>
                 
              </div>
              <br>
              <div class="form-field d-flex">
                  
                <textarea style=" font-size:1.2rem ; padding: 10px; border-radius: 20px;   background-color: #ecf0f3;" name="terms" id="terms" cols="37" rows="4" placeholder="Terms of Investment and funding -" required></textarea>
               
            </div>
              </div>
            <button class="btn mt-3" type="submit" sendMessage()>Post</button>
        </form>
        
        <br>
        <h2 style="text-align: center;font-weight: bold;">Post Your Idea and raise funds</h2>
    </div>
  </main>

  <!-- ======= Footer ======= -->
  <footer id="footer">
    <div class="container">
      <div class="copyright">
        &copy; Copyright <strong><span>CapitalBlend</span></strong>
      </div>
      <div class="credits">
       
        Designed by <a href="">Arun Kumawat</a>
      </div>
    </div>
  </footer><!-- End  Footer -->

  

  <!-- Vendor JS Files -->
  <script src="/assets2/vendor/purecounter/purecounter_vanilla.js"></script>
  <script src="/assets2/vendor/aos/aos.js"></script>
  <script src="/assets2/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="/assets2/vendor/glightbox/js/glightbox.min.js"></script>
  <script src="/assets2/vendor/isotope-layout/isotope.pkgd.min.js"></script>
  <script src="/assets2/vendor/swiper/swiper-bundle.min.js"></script>
  <script src="/assets2/vendor/typed.js/typed.min.js"></script>
  <script src="/assets2/vendor/waypoints/noframework.waypoints.js"></script>
  <script src="/assets2/vendor/php-email-form/validate.js"></script>

  <!-- Template Main JS File -->
  <script src="/assets2/js/main.js"></script>
  <!--Idea -->
  <script src="/assets/js/main.js"></script>
  <!---->
  
  <!---->
  <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
  <script>
    // Get the query parameters from the URL
  // Retrieve the user data from local storage
  const userData = JSON.parse(localStorage.getItem('user'));
  
  if (userData) {
    // Display the user data on the page
    document.getElementById('fname').textContent = ` ${userData.fname}`;
   
   
    document.getElementById('email').textContent = ` ${userData.email}`;
   
  
    // Clear the user data from local storage (optional)
    
  } else {
    // User data not found, handle the situation as desired
    console.log('User data not found.');
  }
  
  
  // Display the data on the page as desired
  
  
  </script>
  <script type="module">
    // Import the functions you need from the SDKs you need

import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-app.js";
import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-analytics.js";
// TODO: Add SDKs for Firebase products that you want to use
// https://firebase.google.com/docs/web/setup#available-libraries

// Your web app's Firebase configuration
// For Firebase JS SDK v7.20.0 and later, measurementId is optional
const firebaseConfig = {
  apiKey: "AIzaSyA1d_5_pS8yG4oRXZMU-NlIZ8_MGUX3eJ8",
  authDomain: "capitalblend-e124d.firebaseapp.com",
  databaseURL: "https://capitalblend-e124d-default-rtdb.firebaseio.com",
  projectId: "capitalblend-e124d",
  storageBucket: "capitalblend-e124d.appspot.com",
  messagingSenderId: "765006869658",
  appId: "1:765006869658:web:2773ddeb2847c8be8a1b23",
  measurementId: "G-0389KXQWN9"
};

// Initialize Firebase
const app = initializeApp(firebaseConfig);
const analytics = getAnalytics(app);
console.log(app);

import { getDatabase, ref, set } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-database.js";
import {  get, child } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-database.js";


//listen for submit event//(1)

import {  onValue } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-database.js";
//import {  set, get, child } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-database.js";
//import { getAuth, signInWithEmailAndPassword } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-auth.js";

const database = getDatabase();

document.getElementById('postidea').addEventListener('submit', formSubmit);


function formSubmit(e) {
  e.preventDefault();

 

  // Retrieve data from the Firebase Realtime Database
 

// Get Values from the DOM

let email = document.querySelector('#email').value;
let phone = document.querySelector('#phone').value;
let idea = document.querySelector('#idea').value;
let terms = document.querySelector('#terms').value;
let foundersingle=document.querySelector('input[name="foundersingle"]:checked').value;
let file = document.querySelector('#file').value;
let weburl = document.querySelector('#url').value;
let startupstage = document.querySelector('#stage').value;
let role = document.querySelector('#role').value;
let buisnesssector = document.querySelector('#buisnesssector').value;
let organisation = document.querySelector('#norganisation').value;
let startup = document.querySelector('#nstartup').value;

function retrieveData(email) {
  const usersRef = ref(database, 'buisnesssusers');
  const ideasRef = ref(database, 'buisnessideas');

  // Listen for changes in the data
  onValue(usersRef, (snapshot) => {
    const data = snapshot.val();
    let isAuthenticated = false;
    let matchedPerson=null;
    
 

    // Loop through the data and check authentication
    for (const key in data) {
      const user = data[key];

      // Display user data on the page as desired
     

      if (user.email === email ) {
        isAuthenticated = true;
        matchedPerson=user;
        break;
      }
    }

    if (isAuthenticated) {
      onValue(ideasRef, (ideasSnapshot) => {
          const ideasData = ideasSnapshot.val();
          let ideas = [];

          // Loop through the ideas data and filter based on user email
          for (const ideaKey in ideasData) {
            const idea = ideasData[ideaKey];

            if (idea.email === email) {
              ideas.push(idea);
            }
          }
          localStorage.setItem('ideas', JSON.stringify(ideas));
        });
      
      sendMessage( email,phone,foundersingle,role,startupstage, buisnesssector,organisation,startup,file,weburl,idea,terms);
      localStorage.setItem('user', JSON.stringify(matchedPerson));
      document.querySelector('.error').textContent = "Posted Successfully";
        

     
    } else {
      // Authentication failed, display error message
      document.querySelector('.error').textContent = "Email is not matched with user email";
    }
  });
}

retrieveData(email);
}
//Send Message to Firebase(4)
function  sendMessage( email,phone,foundersingle,role,startupstage, buisnesssector,organisation,startup,file,weburl,idea,terms) {


set(ref(database, 'buisnesssideas/' + Math.floor(Math.random() * 10000000)), {

email: email,
phone: phone,
foundersingle: foundersingle,
role: role,
startupstage: startupstage,
buisnesssector:buisnesssector,
organisation: organisation,
startup: startup,
file: file, 
weburl:weburl,
idea:idea,
terms:terms
}).then(() => {
  //Show Alert Message(5)

document.getElementById('postidea').reset();

}).catch((error) => {
alert(error)
})
}
 </script>
<script>
  // ... Your existing code ...

  // Log Out
  const logoutLink = document.getElementById('logout');
  logoutLink.addEventListener('click', () => {
    // Perform the log out action here
    // For example, clear user data from local storage and redirect to the login page
    localStorage.removeItem('user');
    sessionStorage.clear(); 
    window.location.replace("/index.html")
    //window.location.href = '/index.html'; // Replace with your desired login page URL
  });
  history.pushState(null, null, document.URL);
  window.addEventListener('popstate', () => {
    history.pushState(null, null, document.URL);
  });
  if (window.performance && window.performance.navigation.type === window.performance.navigation.TYPE_BACK_FORWARD) {
      // Clear the session storage
      sessionStorage.clear();
      // Redirect to the login page
      window.location.href = '/index.html';
    }
  window.addEventListener('beforeunload', () => {
    sessionStorage.clear(); // Clear all session data
    window.location.href = '/index.html'; // Replace with your desired login page URL
  });
</script>
</body>

</html>