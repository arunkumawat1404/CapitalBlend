<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">

  <title>CapitalBlend | Buisness People</title>
  <meta content="" name="description">
  <meta content="" name="keywords">

  <!-- Favicons -->
  <link href="/assets2/img/favicon.png" rel="icon">
  <link href="/assets2/img/apple-touch-icon.png" rel="apple-touch-icon">

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Raleway:300,300i,400,400i,500,500i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i" rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="/assets2/vendor/aos/aos.css" rel="stylesheet">
  <link href="/assets2/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="/assets2/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="/assets2/vendor/boxicons/css/boxicons.min.css" rel="stylesheet">
  <link href="/assets2/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
  <link href="/assets2/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">

  <!-- Template Main CSS File -->
  <link href="/assets2/css/style.css" rel="stylesheet">
  <!---->
 <style>
  
    .table-container {
    margin: 30px auto; 
    /* Adjust the margin to position the table */
    margin-left: 20%;
    width: 70%; /* Adjust the width of the table */
    }

  .table {
    width: 100%; /* Adjust the width of the table */
    border-collapse: collapse;
    text-align: center;
  }

  .table th,
  .table td {
    padding: 10px;
  }
  
 </style>
</head>

<body>

  <!-- ======= Mobile nav toggle button ======= -->
  <i class="bi bi-list mobile-nav-toggle d-xl-none"></i>

  <!-- ======= Header ======= -->
  <header id="header">
    <div class="d-flex flex-column">

      <div class="profile">
        <img src="/assets2/img/profile-img.jpg" alt="" class="img-fluid rounded-circle">
        <h1 class="text-light"><a href="" id="fname"></a></h1>
        <div class="social-links mt-3 text-center">
          <a href="#" class="twitter"><i class="bx bxl-twitter"></i></a>
          <a href="#" class="facebook"><i class="bx bxl-facebook"></i></a>
          <a href="#" class="instagram"><i class="bx bxl-instagram"></i></a>
          <a href="#" class="google-plus"><i class="bx bxl-skype"></i></a>
          <a href="#" class="linkedin"><i class="bx bxl-linkedin"></i></a>
        </div>
      </div>

      <nav id="navbar" class="nav-menu navbar">
        <ul>
            <li><a href="/Content/Buisness People/login/home.html" class="nav-link scrollto "><i class="bx bx-home"></i> <span>Home</span></a></li>
            <li><a href="/Content/Buisness People/login/profile.html" class="nav-link scrollto"><i class="bx bx-user"></i> <span>Profile</span></a></li>
            <li><a href="/Content/Buisness People/login/postidea.html" class="nav-link scrollto"><i class="bx bx-file-blank"></i> <span>Post Idea</span></a></li>
            <li><a href="/Content/Buisness People/login/portfolio.html" class="nav-link scrollto "><i class="bx bx-book-content"></i> <span> Manage Portfolio</span></a></li>
            <li><a href="/Content/Buisness People/login/billing.html" class="nav-link scrollto"><i class="bx bx-server"></i> <span>Billing</span></a></li>
            <li><a href="/Content/Buisness People/login/contact.html" class="nav-link scrollto active"><i class="bx bx-envelope"></i> <span>Contact</span></a></li>
            <li><a href="#" id="logout" class="nav-link scrollto"><i class="bx bx-log-out"></i> <span>Log Out</span></a></li>
        </ul>
      </nav><!-- .nav-menu -->
    </div>
</header><!-- End Header -->
   <main>
        <div class="text-center " style="margin-top: 30px; ">
            <ul >
                <button type="button" class="btn btn-primary " onClick="window.location.href='/Content/Buisness People/login/buisnessadvisorcontact.html';">Buisness Advisor Contact</button>
                
                <button type="button" class="btn btn-primary btn-lg active" >Buisness Advisor Reply</button>
             
                
            </ul>
        </div>
        <div class="table-container ">
          <table class=" table table-primary table-hover ">
            
            <thead>
              <tr class="table-info">
                <th scope="col">No.</th>
                <th scope="col">Reply</th>
              
              </tr>
            </thead>
            <tbody id="ideasTableBody">
            </tbody>
          </table>
        </div>
        
  </table>
</div>
   </main>
 
  <!-- ======= Footer ======= -->
  <footer id="footer">
    <div class="container">
      <div class="copyright">
        &copy; Copyright <strong><span>CapitalBlend</span></strong>
      </div>
      <div class="credits">
       
        Designed by <a href="">Arun Kumawat</a>
      </div>
    </div>
  </footer><!-- End  Footer -->

  

  <!-- Vendor JS Files -->
  <script src="/assets2/vendor/purecounter/purecounter_vanilla.js"></script>
  <script src="/assets2/vendor/aos/aos.js"></script>
  <script src="/assets2/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="/assets2/vendor/glightbox/js/glightbox.min.js"></script>
  <script src="/assets2/vendor/isotope-layout/isotope.pkgd.min.js"></script>
  <script src="/assets2/vendor/swiper/swiper-bundle.min.js"></script>
  <script src="/assets2/vendor/typed.js/typed.min.js"></script>
  <script src="/assets2/vendor/waypoints/noframework.waypoints.js"></script>
  <script src="/assets2/vendor/php-email-form/validate.js"></script>

  <!-- Template Main JS File -->
  <script src="/assets2/js/main.js"></script>
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-app.js";
    import { getDatabase, ref, get } from "https://www.gstatic.com/firebasejs/9.22.1/firebase-database.js";
  
    // Your web app's Firebase configuration
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    const firebaseConfig = {
      apiKey: "AIzaSyA1d_5_pS8yG4oRXZMU-NlIZ8_MGUX3eJ8",
    authDomain: "capitalblend-e124d.firebaseapp.com",
    databaseURL: "https://capitalblend-e124d-default-rtdb.firebaseio.com",
    projectId: "capitalblend-e124d",
    storageBucket: "capitalblend-e124d.appspot.com",
    messagingSenderId: "765006869658",
    appId: "1:765006869658:web:2773ddeb2847c8be8a1b23",
    measurementId: "G-0389KXQWN9"
      
    };
    const app = initializeApp(firebaseConfig);
    // Get a reference to the database service
    const database = getDatabase();
  
    // Retrieve the data from the Firebase Realtime Database
    const ideaRef = ref(database, 'buisnesspeopleadvisorreply/');
  
    // Retrieve the logged-in user's email from local storage
    const userData = JSON.parse(localStorage.getItem('user'));
    if (userData) {
      document.getElementById('fname').textContent = ` ${userData.fname}`;
      const loggedInEmail = userData.email;
  
      get(ideaRef).then((snapshot) => {
        if (snapshot.exists()) {
          const ideas = snapshot.val();
          let tableRows = '';
          let count = 1;
          // Iterate through the ideas
          for (const ideaKey in ideas) {
            if (Object.hasOwnProperty.call(ideas, ideaKey)) {
              const idea = ideas[ideaKey];
              // Access the individual properties of the idea object
              const email = idea.recieveremail;
              // Compare the email with the logged-in user's email
              if (email === loggedInEmail) {
                const email = idea.email;
                const name = idea.name;
                const subject= idea.subject;
                const message = idea.message;
                
               
                const rowData = `<strong>Advisor Name:</strong> ${name}<br>
                                 
                                 <strong>Email:</strong> ${email}<br>
                                 <strong>Subject:</strong> ${subject}<br>
                                 <strong>Message:</strong> ${message}`;
                tableRows += `
                  <tr>
                    <th scope="row">${count}</th>
                    <td>${rowData}</td>
                  </tr>
                `;
                count++;
              }
            }
          }
          if (count > 1) {
            document.getElementById('ideasTableBody').innerHTML = tableRows;
          } else {
            console.log('No data available for the logged-in user.');
          }
        } else {
          console.log('No data available in the database.');
        }
      }).catch((error) => {
        console.error('Error retrieving data:', error);
      });
    } else {
      console.log('User data not found.');
    }
  </script>
  <script>
    // ... Your existing code ...
  
    // Log Out
    const logoutLink = document.getElementById('logout');
    logoutLink.addEventListener('click', () => {
      // Perform the log out action here
      // For example, clear user data from local storage and redirect to the login page
      localStorage.removeItem('user');
      sessionStorage.clear(); 
      window.location.replace("/index.html")
      //window.location.href = '/index.html'; // Replace with your desired login page URL
    });
    history.pushState(null, null, document.URL);
    window.addEventListener('popstate', () => {
      history.pushState(null, null, document.URL);
    });
    if (window.performance && window.performance.navigation.type === window.performance.navigation.TYPE_BACK_FORWARD) {
        // Clear the session storage
        sessionStorage.clear();
        // Redirect to the login page
        window.location.href = '/index.html';
      }
    window.addEventListener('beforeunload', () => {
      sessionStorage.clear(); // Clear all session data
      window.location.href = '/index.html'; // Replace with your desired login page URL
    });
  </script>
</body>

</html>